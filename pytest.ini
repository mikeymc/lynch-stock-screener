[pytest]
# Test discovery patterns
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Test paths - only look in tests/ directory
testpaths = tests

# Ignore patterns - exclude directories that aren't tests
# Note: This doesn't affect tests/backend/, only top-level backend/
norecursedirs = .git .venv node_modules frontend

# Markers for organizing tests
markers =
    e2e: End-to-end browser automation tests (run with dedicated servers)
    backend: Backend unit and integration tests
    integration: Integration tests that require external services
    slow: Tests that take a long time to run

# Logging
log_cli = false
log_cli_level = INFO
log_cli_format = %(levelname)s: %(message)s

# Coverage - can be enabled with:
#   uv run pytest --cov=backend --cov-report=term-missing
addopts =
    -v
    --strict-markers
    --tb=short

# Warning filters
filterwarnings =
    ignore::bs4.XMLParsedAsHTMLWarning
    ignore::DeprecationWarning:flask_session
    ignore::DeprecationWarning:google.genai.types
    ignore::DeprecationWarning:edgar._markdown
    ignore::DeprecationWarning:edgar.files.markdown
    ignore::DeprecationWarning:edgar._filings
